C51 COMPILER V9.60.0.0   MAIN                                                              09/20/2023 12:45:41 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OMF2 OPTIMIZE(8,SPEED) BROWSE DEBUG TABS(2)

line level    source

   1          #include"main.h"
   2          #include"..\lib\Soft_I2c.h"
   3          #include"..\lib\Lcd4.h"
   4          #include"..\lib\Rtc_Ds1307.h"
   5          #include"..\lib\LunarCalendar.h"
   6          #include"Port.h"
   7          
   8          unsigned char * code Days[] = {"SUN","MON","TUE","WED","THU","FRI","SAT"};
   9          
  10          void main()
  11          {
  12   1        unsigned char Hour, Minute, Second, Mode, Day, Date, Month, Year;
  13   1        unsigned char SolarDate, SolarMonth;
  14   1        char SolarYear;
  15   1      
  16   1        Soft_I2c_Init();
  17   1        Ds1307_Init();
  18   1        Lcd_Init();
  19   1        
  20   1        
  21   1        Ds1307_Write(0x07, 0x10);
  22   1        //Ngat Canh xuong
  23   1        IT1 = 1;
  24   1        //Cho phep ngat INT1
  25   1        EX1 = 1;
  26   1        //cho phep ngat toan cuc
  27   1        EA = 1;
  28   1        while(1)
  29   1        {
  30   2          Ds1307_Read_Time(&Hour, &Minute, &Second, &Mode);
  31   2      
  32   2          Lcd_Chr(1,5,Hour/10+0x30);
  33   2          Lcd_Chr_Cp(Hour%10+0x30);
  34   2          Lcd_Chr_Cp(':');
  35   2          Lcd_Chr_Cp(Minute/10+0x30);
  36   2          Lcd_Chr_Cp(Minute%10+0x30);
  37   2          Lcd_Chr_Cp(':');
  38   2          Lcd_Chr_Cp(Second/10+0x30);
  39   2          Lcd_Chr_Cp(Second%10+0x30);
  40   2      
  41   2          Ds1307_Read_Date(&Day, &Date, &Month, &Year);
  42   2          if(BTN == 1){
  43   3            Lcd_Out(2 , 1,"                ");
  44   3            Lcd_Out(2 , 2, Days[Day-1]);//Thu (2 -Cn)
  45   3            Lcd_Chr_Cp(' ');
  46   3            //Days
  47   3            Lcd_Chr_Cp(Date/10 + 0x30);
  48   3            Lcd_Chr_Cp(Date%10 + 0x30);
  49   3            Lcd_Chr_Cp('/');
  50   3            //monht
  51   3            Lcd_Chr_Cp(Month/10 + 0x30);
  52   3            Lcd_Chr_Cp(Month%10 + 0x30);
  53   3            Lcd_Out_Cp("/20");
  54   3            //years
  55   3            Lcd_Chr_Cp(Year/10 + 0x30);
C51 COMPILER V9.60.0.0   MAIN                                                              09/20/2023 12:45:41 PAGE 2   

  56   3            Lcd_Chr_Cp(Year%10 + 0x30);
  57   3          }
  58   2          else 
  59   2          {
  60   3            Solar2Lunar(Date , Month , Year , &SolarDate , &SolarMonth , &SolarYear);
  61   3            Lcd_Out(2 , 1, "Lunar");//Thu (2 -Cn)
  62   3            Lcd_Chr_Cp(':');
  63   3            //Days
  64   3            Lcd_Chr_Cp(SolarDate/10 + 0x30);
  65   3            Lcd_Chr_Cp(SolarDate%10 + 0x30);
  66   3            Lcd_Chr_Cp('/');
  67   3            //monht
  68   3            Lcd_Chr_Cp(SolarMonth/10 + 0x30);
  69   3            Lcd_Chr_Cp(SolarMonth%10 + 0x30);
  70   3            Lcd_Chr_Cp('/');
  71   3            //years
  72   3            Lcd_Chr_Cp((SolarYear+2000)/1000 + 0x30);
  73   3            Lcd_Chr_Cp((SolarYear+2000)/100%10 + 0x30);
  74   3            Lcd_Chr_Cp((SolarYear+2000)/10%10 + 0x30);
  75   3            Lcd_Chr_Cp((SolarYear+2000)%10 + 0x30);
  76   3          }
  77   2          PCON |= 0x01;       //Dua CPU vao trang thai nghi
  78   2        }
  79   1      }
  80          //ISR: Intrerrupt Servicer Routine
  81          void EX1_ISR(void) interrupt 0
  82          {
  83   1      
  84   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    588    ----
   CONSTANT SIZE    =     76    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      11
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
